when:
  - event: ["pull_request"]
    branch: ["main"]

engine: "nixery"

clone:
  skip: false
  depth: 1
  submodules: false

dependencies:
  nixpkgs:
    - gnused
    - nodejs_24
    - pnpm

environment:
  CI: "true"
  NO_COLOR: "true"
  NODE_ENV: "production"
  PUBLIC_BASE_URL: "https://skywrapped.app"
  PORT: ""
  LOG_LEVEL: "info"

steps:
  - name: "Install dependencies"
    command: "pnpm install --frozen-lockfile"
  - name: "Run QA"
    command: "pnpm run qa"
